<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_npc_smith</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>obj_talking_npc</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>talking = false;
player_wants_to_talk = false;
quest_id = -1;
player_dialog = noone;
obj_player.can_fight = false; //so you cant kill the ducks

dialog_num = noone;
dialog_num[0] = 0;
dialog_num[1] = 0;

dialog = noone;
//when you first talk to the Smith
dialog[0, 0] = "Welcome Adventurer!";
dialog[0, 1] = "Would you mind helping me?";
dialog[0, 2] = "...Oh hello there young fellow";
dialog[0, 3] = "Can you help me with something?";
//then the player says yes
dialog[1, 0] = "Your help will be appreciated and rewarded.";
dialog[1, 1] = "Right now I am out of resources.";
dialog[1, 2] = "Could you bring me 6 Iron Bars?";
dialog[1, 3] = "Good luck and be careful of the slimes.";
// The player accepts the mission of searching for 6 Iron Bars.
//after this dialog add this quest to quest list

//when ever you talk with the Smith again when quest in progress
dialog[2, 0] = "Continue searching for Iron Bars until you have 6.";

//when you finished the quest
dialog[3, 0] = "Thank you for your help.";
dialog[3, 1] = "Here is your reward.";
//animation or something showing player got something from the Smith
//also show the quest in pause menu tab is complete
dialog[4, 0] = "Use that sword to fend off stronger monsters.";

//if you talk to the Smith again after quest complete
//option 1
dialog[5, 0] = "In life, search for something you love to do.";
dialog[5, 1] = "Make sure to wear eye protection when necessary.";
//option 2
dialog[6, 0] = "I find my work very pleasurable.";
//option 3
dialog[7, 0] = "I wonder how much more money I can make raising chickens...";

dialog[8, 0] = "Added me on instagram: @_3raan_";








</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>other</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>//when quest complete change the dialog
if(dialog_num[0]==2){
    var duck_count = 0;
    with(obj_duck){
        if(place_meeting(x, y, obj_objective_area)) duck_count++;
    }
    if(duck_count == 5){
        dialog_num[0] = 3;
        dialog_num[1] = 0;
        obj_player_stats.quest_log[quest_id, 2] = "Talk to the Smith to get your reward"
    }
}
//go to next dialog
if(player_wants_to_talk){
    player_wants_to_talk = false;
    talking = true;
    dialog_num[1] = 0;
    if(dialog_num[0]&gt;4) dialog_num[0] = irandom_range(5,8);
}
if(obj_input.continue_key){
    dialog_num[1]++;
    //after player talks do this
    if(player_dialog != noone){
        dialog_num[0]++;
        dialog_num[1] = 0;
        player_dialog = noone;
    }
    
    //after talking about the quest show the quest objective
    if(dialog_num[0]==1 and dialog_num[1]&gt;3 and talking){
        quest_id = array_height_2d(obj_player_stats.quest_log);
        obj_player_stats.quest_log[quest_id, 0] = false;
        // The player needs 6 Iron Bars to give to the Farmer.
        obj_player_stats.quest_log[quest_id, 1] = "Collect 6 Iron Bars";
        obj_player_stats.quest_log[quest_id, 2] = "Find all 6 Iron Bars and bring them back to the Smith";
        obj_player_stats.current_quest = quest_id;
        talking = false;
        obj_control.game_state = PLAY;
        dialog_num[0] = 2;
    }
    //After he asked the question
    else if(dialog_num[0]==0 and dialog_num[1]&gt;3 and talking){
        //dont stop talking because player will talk next
    }
    //When you finished the quest
    else if(dialog_num[0]==3 and dialog_num[1]&gt;1 and talking){
        //animation or something showing player got something from the Smith'
        //also show the quest in pause menu tab is complete
        talking = false;
        obj_control.game_state = PLAY;
        dialog_num[0] = 4;
        dialog_num[1] = 0;
    }
    //When the quest talking is completly over
    else if(dialog_num[0]==4 and dialog_num[1]&gt;0 and talking){
        talking = false;
        obj_control.game_state = PLAY;
        dialog_num[0] = 5;
        dialog_num[1] = 0;
        obj_player_stats.quest_log[quest_id, 2] = "Completed";
        if(obj_player_stats.current_quest == quest_id) obj_player_stats.current_quest = -1;
    }
    //for all other dialog endings just stop talking
    else if(dialog_num[0] &gt;= 0 and talking){
        if(dialog_num[1]&gt;=array_length_2d(dialog, dialog_num[0])){
            talking = false;
            obj_control.game_state = PLAY;
        }
    }
}

//freeze the game if they are talking
if(talking and obj_control.game_state == PLAY) obj_control.game_state = FREEZE;

//trigger player to say yes
if(dialog_num[0] == 0 and dialog_num[1] &gt; 3 and talking){
    player_dialog = "I would love to help";
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>var scale = display_get_gui_width()/view_wview[0];
//this person talking
if(dialog_num[0] &gt;= 0 and talking){
    if(dialog_num[1]&lt;array_length_2d(dialog, dialog_num[0])) {
        draw_set_colour(c_black);
        var xx = display_get_gui_width()/2-(sprite_get_width(spr_notification_top)/2)*scale
        var yy = 0
        draw_sprite_ext(spr_notification_top, 0, xx, yy, scale, scale, 0, -1, 1)
        draw_text_ext(xx+20, yy+20, dialog[dialog_num[0], dialog_num[1]], 14, (sprite_get_width(spr_notification_top))*scale-30);
    }
}
//player talking
if(player_dialog != noone) {
    draw_set_colour(c_black);
    var xx = display_get_gui_width()/2-(sprite_get_width(spr_notification_top)/2)*scale
    var yy = 0
    draw_sprite_ext(spr_notification, 0, xx, yy, scale, scale, 0, -1, 1)
    draw_text_ext(xx+20, yy+20, player_dialog, 14, (sprite_get_width(spr_notification_top))*scale-30);
}

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>-1</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>1</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>0,0</point>
    <point>16,0</point>
    <point>16,16</point>
    <point>0,16</point>
  </PhysicsShapePoints>
</object>
